var RoadSafetyApp=function(){this.initialize=function(){this.models={};this.views={};this.templateLoader=new this.TemplateLoader};this.TemplateLoader=function(){this.templates={};this.load=function(e,t){var n=[],r=this;$.each(e,function(e,t){n.push($.get("tpl/"+t+".html",function(e){r.templates[t]=Handlebars.compile(e)}))});$.when.apply(null,n).done(t)};this.get=function(e){return this.templates[e]}};this.initialize()};rs=new RoadSafetyApp;rs.views.SimpleView=Backbone.View.extend({initialize:function(e){this.template=rs.templateLoader.get(e.templateName);this.render()},render:function(){this.$el.html(this.template());this.$el.i18n();return this}});var app={initialize:function(){window.PhoneGap?this.bindEvents():this.onDeviceReady()},bindEvents:function(){document.addEventListener("deviceready",this.onDeviceReady,!1)},enableTransitions:function(){$("body").removeClass("no-transition")},onDeviceReady:function(){function t(){$(".menu").removeClass("hidden-menu");$("#app").addClass("has-menu")}function n(){$(".menu").addClass("hidden-menu");$("#app").removeClass("has-menu")}console.log("device ready");FastClick.attach(document.body);var e=this;detectSwipe("#app",{swipeLeft:function(){$(".right-menu").removeClass("hidden")},swipeRight:function(){$(".left-menu").removeClass("hidden")}});detectSwipe(".left-menu",{swipeLeft:function(){$(".left-menu").addClass("hidden")}});detectSwipe(".right-menu",{swipeRight:function(){$(".right-menu").addClass("hidden")}});$(".show-menu").click(function(){$(this).parents(".menu").toggleClass("hidden")});var r=Backbone.Router.extend({routes:{"":"home",info:"info",game:"game",play:"play"},initialize:function(){this.bind("all",this.change)},change:function(e){$("body").addClass("no-transition")},home:function(){var e=new rs.views.SimpleView({templateName:"home"});this.slider.slidePage(e.$el);t()},info:function(){var e=new rs.views.SimpleView({templateName:"info"});this.slider.slidePage(e.$el);n()},game:function(){var t=new rs.views.SimpleView({templateName:"game"});this.slider.slidePage(t.$el);n();var r=rs.templateLoader.get("_card"),s={filename:"car-1.png"},o=$("#cards"),u=o.data("cards-number"),a=o.outerHeight()-parseInt(o.css("top")),f,l,c;switch(u){case 24:f=4;break;case 12:f=3;break;case 6:f=2}l=u/f;c=a/l;for(i=0;i<u;i++)$("#cards ul").append($(r(s)).height(c));$(".test li").click(function(){var e=$(this).data("number");u=e;switch(u){case 24:f=4;break;case 12:f=3;break;case 6:f=2}l=u/f;c=a/l;o.attr("data-cards-number",e);$("#cards ul").empty();for(i=0;i<u;i++)$("#cards ul").append($(r(s)).height(c))});setTimeout(function(){e.enableTransitions();$(".page.left, .page.right").remove();$(".cards-icon","#games").removeClass("animate-1");setTimeout(function(){$(".text, #play","#games").removeClass("animate-1");setTimeout(function(){$("#play span","#games").removeClass("animate-1")},100)},100)},300);$("#play").click(function(e){e.preventDefault();$(".cards-icon, .text, #play, #play span","#games").addClass("animate-1");setTimeout(function(){$(".scrollable").hide()},200);var t=0,n=70;setTimeout(function(){o.show().find("li").each(function(){t+=n;var e=$(this);setInterval(function(){e.removeClass("animate-1")},t)})},600)});o.find("li").click(function(){$(this).toggleClass("flipped")})}}),s={resGetPath:"assets/locales/__lng__/__ns__.json",fallbackLng:"en",lng:"en"};i18n.init(s,function(e){rs.templateLoader.load(["home","info","game","_card"],function(){var e=new r;e.slider=new PageSlider($("#app"));Backbone.history.start()})})}};